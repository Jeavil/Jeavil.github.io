<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Buffering...">
    <meta name="keyword"  content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          iOS9 Programming Autoayout (II) - undefined
        
    </title>

    <link rel="canonical" href="http://yoursite.com/2016/06/01/iOS9 Programming Autolayout(II)/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="http://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Jeavil&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://yoursite.com/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/undefined')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                    </div>
                    <h1>iOS9 Programming Autoayout (II)</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by Jeavil on
                        2016-06-01
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>ä»Šå¤©è·Ÿå¤§å®¶èŠä¸€èŠAutolayoutç¬¬äºŒå°èŠ‚çš„å†…å®¹ï¼Œåœ¨é˜…è¯»ä¹‹å‰å¸Œæœ›ä½ èƒ½å…ˆäº†è§£ä¸€ä¸‹å«åš â€œAnchorâ€ (é”šç‚¹) çš„ä¸œä¸œï¼Œè€å®è¯´ï¼Œæˆ‘å¯¹è¿™ä¸ªä¸œè¥¿çš„äº†è§£ä¹Ÿæ˜¯æµ®äºè¡¨é¢ï¼Œæ‰€ä»¥å¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« èƒ½å…ˆæŠŠè‡ªå·±è®²æ‡‚ï¼Œå…¶æ¬¡å¸Œæœ›èƒ½ç»™å±å¹•å‰çš„ä½ å¸¦æ¥ä¸€äº›å¸®åŠ©ã€‚è€è§„çŸ©ï¼Œå¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ°ä»€ä¹ˆé—®é¢˜è¯·åŠæ—¶çº æ­£ï¼Œå…±åŒè¿›æ­¥ğŸ˜„</p>
<h2 id="Anchor-notationï¼ˆé”šç‚¹æ ‡è®°æ³•ï¼‰"><a href="#Anchor-notationï¼ˆé”šç‚¹æ ‡è®°æ³•ï¼‰" class="headerlink" title="Anchor notationï¼ˆé”šç‚¹æ ‡è®°æ³•ï¼‰"></a>Anchor notationï¼ˆé”šç‚¹æ ‡è®°æ³•ï¼‰</h2><p>åœ¨ <a href="http://www.jianshu.com/p/56e0cd434e7b" target="_blank" rel="external">Autolayout(I)</a> ä¸­æˆ‘ä»¬ä½¿ç”¨çš„çš„æ˜¯ NSLayoutConstraint çš„<code>initializer</code> æ–¹æ³•å¯ä»¥åˆå§‹åŒ–ä»»æ„çº¦æŸï¼Œä½†æ˜¯ Anchor notation æ›´æ³¨é‡äºçº¦æŸé—´å±æ€§çš„å…³ç³»ï¼Œè€Œä¸æ˜¯çº¦æŸã€‚ä¸‹é¢åˆ—ä¸¾ä¸€äº› UIView ä¸­anchor çš„å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- topAnchor, bottomAnchor</div><div class="line">- leftAnchor, rightAnchor,  leadingAnchor,trailingAnchor</div><div class="line">- centerXAnchor, centerYAnchor</div><div class="line">- firstBaselineAnchor,lastBaselineAnchor</div></pre></td></tr></table></figure>
<p>anchor çš„å€¼éƒ½æ˜¯ <code>NSLayoutAnchor</code> çš„å®ä¾‹å¯¹è±¡ï¼ŒNSLayoutAnchor   çš„å¯¹è±¡æ–¹æ³•æœ‰å¾ˆå¤šï¼Œé€‰æ‹©ä½¿ç”¨å“ªç§æ–¹æ³•è¦çœ‹ä½ çš„çº¦æŸæ˜¯å¦éœ€è¦æŒ‡å®šå¦ä¸€ä¸ª Anchorçš„ <code>constant</code> æˆ– <code>multiplier</code> æˆ–è€…ä¸¤è€…éƒ½éœ€è¦ä½¿ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">constraintEqualToConstant: </div><div class="line">constraintGreaterThanOrEqualToConstant: </div><div class="line">constraintLessThanOrEqualToConstant: </div><div class="line">constraintEqualToAnchor: </div><div class="line">constraintGreaterThanOrEqualToAnchor: </div><div class="line">constraintLessThanOrEqualToAnchor: </div><div class="line">constraintEqualToAnchor:constant: </div><div class="line">constraintGreaterThanOrEqualToAnchor: constant: </div><div class="line">constraintLessThanOrEqualToAnchor: constant: </div><div class="line">constraintEqualToAnchor: multiplier: </div><div class="line">constraintGreaterThanOrEqualToAnchor: multiplier: </div><div class="line">constraintLessThanOrEqualToAnchor: multiplier: </div><div class="line">constraintEqualToAnchor: multiplier: constant: </div><div class="line">constraintGreaterThanOrEqualToAnchor: multiplier: constant: </div><div class="line">constraintLessThanOrEqualToAnchor: multiplier: constant:</div></pre></td></tr></table></figure>
<p>çœ‹ä¸Šå»è¿™äº›æ–¹æ³•å¥½åƒå¾ˆå¤æ‚ï¼Œå…¶å®åœ¨ä½¿ç”¨çš„æ—¶å€™ä½ ä¼šå‘ç°è¿™ç§æ–¹æ³•çš„ä¾¿åˆ©ï¼Œå› ä¸ºå®ƒæ˜“è¯»å†™ï¼Œå¹¶å®¹æ˜“ç»´æŠ¤ã€‚æ–°çš„æ–¹æ³•è¿˜éå¸¸æ–¹ä¾¿çš„ä¸<code>activateConstraints</code> ç›¸ç»“åˆä½¿ç”¨ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒåº”è¯¥ç»™å“ªä¸ªè§†å›¾æŒ‡å®šå“ªä¸ªconstraintï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">NSLayoutConstraint.activateConstraints([</div><div class="line">v2.leadingAnchor.constraintEqualToAnchor(v1.leadingAnchor),</div><div class="line">v2.trailingAnchor.constraintEqualToAnchor(v1.trailingAnchor),</div><div class="line">v2.topAnchor.constraintEqualToAnchor(v1.topAnchor),</div><div class="line">v2.heightAnchor.constraintEqualToConstant(10),</div><div class="line">v3.widthAnchor.constraintEqualToConstant(20),</div><div class="line">v3.heightAnchor.constraintEqualToConstant(20),</div><div class="line">v3.trailingAnchor.constraintEqualToAnchor(v1.trailingAnchor),</div><div class="line">v3.bottomAnchor.constraintEqualToAnchor(v1.bottomAnchor),</div><div class="line">])</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹å¾—åˆ°ä¸‹å›¾ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1614000-03823f8fee3ae9ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å›¾1 .png"></p>
<h2 id="Visual-format-notation"><a href="#Visual-format-notation" class="headerlink" title="Visual format notation"></a>Visual format notation</h2><p>Visual format æ–¹æ³•æ˜¯ä¸€ç§å®ç”¨ä¸€ç»„ä½¿ç”¨æ–‡æœ¬çš„ç®€å•è¡¨è¾¾æ–¹å¼æ¥åˆ›å»ºçº¦æŸã€‚å®ƒçš„å¥½å¤„æ˜¯å¯ä»¥å¾ˆå¿«æ·çš„æ„é€ å‡ºè®¸å¤š constraintsï¼Œå½“ä½ éœ€è¦å¸ƒå±€ä¸€ç³»åˆ—çš„ view åœ¨ç«–ç›´æˆ–æ°´å¹³æ–¹å‘çš„æ—¶å€™è¯¥å°±æ˜¾å¾—å°¤å…¶åˆé€‚ã€‚ä¸¾ä¸ªä¾‹å­<br><code>V:| v2(10)</code><br>è¿™ä¸ªä¾‹å­ä¸­çš„ <strong><em><code>V:</code></em></strong>ä»£è¡¨ç«–ç›´æ–¹å‘ï¼Œé‚£ä¹ˆè¦è¡¨ç¤ºæ°´å¹³æ–¹å‘å°±æ˜¯ç”¨ <strong><em><code>H:</code></em></strong>, é»˜è®¤æƒ…å†µä¸‹æ˜¯æ°´å¹³æ–¹å‘ã€‚ <strong><code>|</code></strong> ä»£è¡¨çš„æ˜¯ <code>superview</code> ï¼Œä¸Šè¿°è¡¨è¾¾å¼çš„æ„æ€æ˜¯ ç«–ç›´æ–¹å‘ä¸Š v2 å’Œ superview çš„ä¸Šè¾¹ç•Œå¯¹æ¥èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´é¡¶éƒ¨ä½ç½®é‡åˆï¼Œæ‹¬å·ä¸­çš„æ•°å­—æ˜¯è®¾ç½® v2 çš„é«˜ä¸º 10ã€‚<br>åœ¨ä½¿ç”¨ visual format æ–¹æ³•çš„æ—¶å€™ï¼Œä½ éœ€è¦æä¾›ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸é‡Œé¢åŒ…å«ä½ æ‰€æœ‰éœ€è¦æ¶‰åŠåˆ°çš„çš„ view çš„åå­—ã€‚æ¯”å¦‚ä¸Šè¿°ä¾‹å­ä¸­ä½ å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªå­—å…¸ <code>[&quot;v2&quot;:v2]</code> ,ä¸‹é¢æˆ‘æ¥ç”¨visual format çš„æ–¹å¼æ¥é‡ç°ä¸Šå›¾çš„æ•ˆæœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">let d = [&quot;v2&quot;:v2 ,&quot;v3&quot;:v3];</div><div class="line">NSLayoutConstraint.activateConstraints([</div><div class="line">NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|[v2]&quot;, options: [], metrics: nil, views: d),</div><div class="line">NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:|[v2(10)]&quot;, options: [], metrics: nil, views: d),</div><div class="line">NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|[v3](20)&quot;, options: [], metrics: nil, views: d),</div><div class="line">NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:|[v3](20)&quot;, options: [], metrics: nil, views: d),</div><div class="line">].flatten().map&#123;$0&#125;)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬åªæœ‰äº†å››ä¸ªçº¦æŸè€Œä¸æ˜¯å…«ä¸ªå°±å¯ä»¥è¾¾åˆ°æ•ˆæœã€‚<br>ä¸‹é¢æˆ‘ä»¬è§£é‡Šä¸€ä¸‹æ–¹æ³•ä¸­æ¯ä¸ªå‚æ•°çš„æ„æ€ï¼š</p>
<blockquote>
<p><strong>metrics</strong>: æ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹çš„å­—å…¸ï¼Œå½“åœ¨formatä¸­ä½¿ç”¨äº†åŠ¨æ€æ•°æ®æ¯”å¦‚ä¸Šç°è¿™å¥:@â€H:|-[button(==width)]-|â€,è¡¨ç¤ºè¿™ä¸ªbuttonçš„å®½åº¦ä¸ºwidth,é‚£ä¹ˆè¿™ä¸ªå‚æ•°å»å“ªé‡Œæ‰¾å‘¢ï¼Ÿå°±æ˜¯åœ¨è¿™ä¸ªå­—å…¸é‡Œé¢æ‰¾åˆ°keyå¯¹åº”çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå€¼ï¼Œappå°±ä¼šcrash.<br><strong>opts</strong>:æšä¸¾å‚æ•°ï¼Œé»˜è®¤å†™0ï¼Œå…·ä½“è·Ÿæ®ä½ æ‰€å®ç°çš„éœ€æ±‚å»é€‰æ‹©ä½ æƒ³è¦çš„æšä¸¾<br>æè¿°ä¸¤ä¸ªviewä¹‹é—´çš„è·ç¦»ï¼Œ<code>[v1]-20-[v2]</code>,è¡¨ç¤º v1 ä¸ v2 ä¹‹é—´é—´è·ä¸º 20ã€‚</p>
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>è¡¨è¾¾å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ°´å¹³æ–¹å‘</td>
<td>H:</td>
</tr>
<tr>
<td>ç«–ç›´æ–¹å‘</td>
<td>V:</td>
</tr>
<tr>
<td>Views</td>
<td>[View]</td>
</tr>
<tr>
<td>superview</td>
<td>ï½œ</td>
</tr>
<tr>
<td>å…³ç³»</td>
<td>&gt;=, &lt;=, ==</td>
</tr>
<tr>
<td>é—´è·</td>
<td>ï¼</td>
</tr>
<tr>
<td>ä¼˜å…ˆçº§</td>
<td>@value</td>
</tr>
</tbody>
</table>
</blockquote>
<h2 id="Constraints-as-objects"><a href="#Constraints-as-objects" class="headerlink" title="Constraints as objects"></a>Constraints as objects</h2><p>æœ‰äº›æ—¶å€™ä½ å¯èƒ½ä¼šä»æ ¹æœ¬ä¸Šæ”¹å˜ç”¨æˆ·ç•Œé¢ï¼Œæ¯”å¦‚æ’å…¥æˆ–è€…ç§»é™¤ä¸€ä¸ª view ï¼Œä½ ä¼šå‘ç°å°†è®¸å¤šç»„çº¦æŸç½®äºæ‰‹è¾¹æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œæ¯ä¸€ä¸ªçº¦æŸéƒ½ä¼šä½œç”¨äºç•Œé¢ä¸Šçš„ä¸€ä¸ªconfigurationã€‚è¿™ä¸ªå¬èµ·æ¥ä¼šæ¯”è¾ƒæŠ½è±¡ä¸‹é¢æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹ï¼šåœ¨æˆ‘ä»¬çš„ mainview é‡Œé¢æœ‰ä¸‰ä¸ª view åˆ†åˆ«æ˜¯ v1, v2, v3, v1 ä¸ºçº¢è‰²ï¼Œ v2 ä¸ºé»„è‰²ï¼Œ v3 ä¸ºè“è‰²ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯¹ä¸‰ä¸ªviewéƒ½æ˜¯å¼ºå¼•ç”¨ã€‚åœ¨ app è¿è¡Œçš„æ—¶å€™æˆ‘ä»¬åŠ¨æ€çš„å°†é»„è‰² v2 å…ˆç§»é™¤ï¼Œç„¶åå°† è“è‰²çš„ v3 ç½®äº v2 åŸæ¥çš„ä½ç½®ï¼Œæœ€åæˆ‘ä»¬å†å°†é»„è‰²çš„ view æ’å…¥ã€‚å¥½çš„ï¼Œç°åœ¨æˆ‘åˆå§‹åŒ–ä¸¤ç»„ constraints ï¼Œä¸€ç»„ç”¨æ¥æè¿° v1ï¼Œ v2ï¼Œ v3 è¿™ä¸ªé¡ºåºçš„å±•ç¤ºï¼Œ å¦å¤–ä¸€ç»„æ¥æè¿° v1ï¼Œv3ï¼Œv2 çš„å±•ç¤ºé¡ºåºã€‚å› æ­¤æˆ‘ä»¬åˆå§‹åŒ–ä¸¤ç»„æ•°ç»„ç”¨æ¥å­˜å‚¨ NSLayoutConstraints åˆ†åˆ«æ˜¯ contraintsWith å’Œ constraintsWithoutï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ä»£ç å§ï¼<br>å…ˆå£°æ˜å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var v1: UIView? </div><div class="line">var v2: UIView?</div><div class="line">var v3: UIView?</div><div class="line"></div><div class="line">var constraintsWith = [NSLayoutConstraint]()</div><div class="line">var constraintsWithout = [NSLayoutConstraint]()</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">let v1 = UIView()</div><div class="line">v1.backgroundColor = UIColor.redColor()</div><div class="line">v1.translatesAutoresizingMaskIntoConstraints = false</div><div class="line"></div><div class="line">let v2 = UIView()</div><div class="line">v2.backgroundColor = UIColor.yellowColor()</div><div class="line">v2.translatesAutoresizingMaskIntoConstraints = false</div><div class="line"></div><div class="line">let v3 = UIView()</div><div class="line">v3.backgroundColor = UIColor.blueColor()</div><div class="line">v3.translatesAutoresizingMaskIntoConstraints = false</div><div class="line"></div><div class="line">self.view.addSubview(v1)</div><div class="line">self.view.addSubview(v2)</div><div class="line">self.view.addSubview(v3)</div><div class="line"></div><div class="line">self.v1 = v1</div><div class="line">self.v2 = v2</div><div class="line">self.v3 = v3</div><div class="line"></div><div class="line">let c1 = NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|-(20)-[v(100)]&quot;, options: [], metrics: nil, views: [&quot;v&quot;:v1])</div><div class="line">let c2 = NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|-(20)-[v(100)]&quot;, options: [], metrics: nil, views: [&quot;v&quot;:v2])</div><div class="line">let c3 = NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|-(20)-[v(100)]&quot;, options: [], metrics: nil, views: [&quot;v&quot;:v3])</div><div class="line">let c4 = NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:|-(100)-[v(20)]&quot;, options: [], metrics: nil, views: [&quot;v&quot;:v1])</div><div class="line">let c5with = NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:[v1]-(20)-[v2(20)]-(20)-[v3(20)]&quot;, options: [], metrics: nil, views: [&quot;v1&quot;:v1,&quot;v2&quot;:v2,&quot;v3&quot;:v3])</div><div class="line">let c5Without = NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:[v1]-(20)-[v3(20)]&quot;, options: [], metrics: nil, views: [&quot;v1&quot;:v1,&quot;v3&quot;:v3])</div><div class="line"></div><div class="line">self.constraintsWith.appendContentsOf(c1)</div><div class="line">self.constraintsWith.appendContentsOf(c2)</div><div class="line">self.constraintsWith.appendContentsOf(c3)</div><div class="line">self.constraintsWith.appendContentsOf(c4)</div><div class="line">self.constraintsWith.appendContentsOf(c5with)</div><div class="line"></div><div class="line">self.constraintsWithout.appendContentsOf(c1)</div><div class="line">self.constraintsWithout.appendContentsOf(c3)</div><div class="line">self.constraintsWithout.appendContentsOf(c4)</div><div class="line">self.constraintsWithout.appendContentsOf(c5Without)</div><div class="line"></div><div class="line">NSLayoutConstraint.activateConstraints(self.constraintsWith)</div><div class="line"></div><div class="line">if self.v2?.superview != nil &#123;</div><div class="line">self.v2?.removeFromSuperview()</div><div class="line">NSLayoutConstraint.deactivateConstraints(self.constraintsWith)</div><div class="line">NSLayoutConstraint.activateConstraints(self.constraintsWithout)</div><div class="line">&#125;else &#123;</div><div class="line">self.view.addSubview(v2)</div><div class="line">NSLayoutConstraint.deactivateConstraints(self.constraintsWithout)</div><div class="line">NSLayoutConstraint.activateConstraints(self.constraintsWith)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»“æœï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1614000-d2a3928768307c07.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="v2ç§»é™¤ä¹‹å‰.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1614000-3ea80990c1ec65b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="v2ç§»é™¤ä¹‹å.png"></p>
<h2 id="Guides-and-margins"><a href="#Guides-and-margins" class="headerlink" title="Guides and margins"></a>Guides and margins</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹ view éƒ½æ˜¯æœ‰æ˜ç¡®çš„è¾¹ç•Œå’Œä¸­å¿ƒï¼Œå¹¶ä¸”ä»–ä»¬ä¼šä¸€ç›´å­˜åœ¨åœ¨é‚£ä¸ªåœ°æ–¹ï¼Œä½†æœ‰äº›æ—¶å€™ï¼Œä½ æƒ³è®©ä¸€ä¸ª view æœ‰å…¶ä»–çš„é”šç‚¹ä¸€ç§ <code>secondary anchor</code>ï¼Œå¯ä»¥çº¦æŸå…¶ä»–viewã€‚ä½ å¸Œæœ›è¿™ä¸ªé”šç‚¹å¯ä»¥ç§»åŠ¨æ—¶ view çš„constraints ä¹Ÿä¼šéšç€é”šç‚¹çš„ç§»åŠ¨è€Œç§»åŠ¨ï¼Œæˆªæ­¢åˆ°ç°åœ¨æœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥å®ç°è¿™ç§éœ€æ±‚ã€‚è€ƒè™‘ mainview çš„ subviews ä¼šå›ºå®šåœ¨é¡¶éƒ¨æˆ–åº•éƒ¨ï¼Œå¹¶ä¸”æœ‰äº›æ—¶å€™ï¼Œmainview çš„ ä¸Šé¢æˆ–è€…ä¸‹é¢ä¼šè¢« navigation bar ï¼Œstatus barï¼Œ tool barï¼Œ tab bar å æ®ï¼Œè¿™æ—¶ä½ åªèƒ½åœ¨è¿™äº› bars çš„ä¸­é—´å¸ƒå±€ä½ çš„ subviews ã€‚ä» iOS7 å¼€å§‹ï¼Œmainviewåœ¨é‚£äº›barçš„èƒŒåå¯ä»¥åœ¨ç«–ç›´æ–¹å‘ä¸Šå»¶ä¼¸è‡³ window çš„è¾¹ç•Œï¼Œå¹¶ä¸”è¿™äº›barå¯ä»¥åŠ¨æ€çš„æ·»åŠ æˆ–ç§»é™¤ï¼Œè¿˜å¯ä»¥æ”¹å˜ä»–ä»¬çš„é«˜åº¦ï¼Œæ¯”å¦‚iOS8å¼€å§‹å½“å±å¹•ç½®äºæ¨ªå±æ—¶ï¼Œstatus barå°†ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œnavigation bar ç«–å±æ—¶çš„é«˜åº¦è¦é«˜äºæ¨ªå±æ—¶çš„é«˜åº¦ã€‚å› æ­¤å½“ä½ çš„ bars æ¶ˆå¤±æˆ–è€…æ˜¾ç¤ºçš„æ—¶å€™ä½ çš„ç«–ç›´æ–¹å‘ä¸Šçš„çº¦æŸéƒ½è¦ç§»åŠ¨ï¼Œå¦åˆ™ä½ çš„ç•Œé¢åœ¨ä¸€äº›æƒ…å†µä¸‹å¯èƒ½çœ‹èµ·æ¥æ˜¯é”™è¯¯çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªviewä¸mainviewé¡¶éƒ¨å¯¹é½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let arr = NSLayoutConstraint.constraintsWithVisualFormat( &quot;V:|-0-[v]&quot;, options: [],metrics: nil,views: [&quot;v&quot;:v])</div></pre></td></tr></table></figure>
<p>å½“å±å¹•ç½®äºæ¨ªå±æ—¶çŠ¶æ€æ ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œè¯¥viewè¿˜æ˜¯ä¼šåœ¨å±å¹•çš„é¡¶éƒ¨ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ç„¶ååœ¨è®²å±å¹•ç¿»è½¬æˆç«–å±æ—¶ï¼Œè¿™ä¸ªviewè¿˜æ˜¯ä¼šåœ¨å±å¹•çš„é¡¶éƒ¨ï¼Œä½†è¿™æ—¶status bar å´æ²¡æœ‰æ˜¾ç¤ºè¢« view æŒ¡ä½äº†</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1614000-a254f8beac868516.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç«–å±.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1614000-4c3fb955270a31ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ¨ªå±.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1614000-f4c0a6b71d7f304c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å†ç«–å±.png"></p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒUIViewController æä¾›äº†ä¸¤ä¸ªä¸å¯è§çš„ viewï¼ˆä»–ä»¬å¹¶ä¸æ˜¯çœŸæ­£çš„viewï¼Œä¾¿äºç†è§£å¯ä»¥å°†å®ƒä»¬æƒ³è±¡æˆviewï¼‰ ä¸€ä¸ªæ—¶ <strong><em>top layout guide</em></strong> å’Œ <strong><em>bottom layout guide</em></strong><br>å®ƒå°†ä½œä¸ºå­è§†å›¾æ·»åŠ åˆ° main view çš„è§†å›¾å±‚çº§ç»“æ„ä¸­å»ã€‚è¿™ä¸‹ä½ ç«–ç›´æ–¹å‘ä¸Šé¡¶éƒ¨å’Œåº•éƒ¨çš„çº¦æŸä¸ä¼šå†main view çš„é¡¶éƒ¨å’Œåº•éƒ¨ å’Œ subview ä¹‹é—´ï¼Œè€Œæ˜¯åœ¨ subview å’Œ top layout guide åº•éƒ¨ä¹‹é—´ï¼Œæˆ–è€…æ˜¯ subview ä¸ bottom layout guide çš„é¡¶éƒ¨ä¹‹é—´ï¼Œtop layout guide çš„åº•éƒ¨å’Œ barçš„æœ€åº•éƒ¨ç›¸é‡åˆï¼Œå¦‚æœmainview çš„é¡¶éƒ¨æ²¡æœ‰bar çš„è¯å°±å’Œ mianview çš„é¡¶éƒ¨é‡åˆã€‚ç›¸åï¼Œbottom layout guide çš„é¡¶éƒ¨å°†å’Œåº•éƒ¨çš„barçš„é¡¶éƒ¨é‡åˆï¼Œå¦‚æœmainview æ²¡æœ‰åº•éƒ¨çš„ bar åˆ™ä¼šå’Œmainview çš„æœ€åº•éƒ¨é‡åˆã€‚é‡è¦çš„æ˜¯ï¼Œè¿™äº›layout guides å°†ä¼šéšç€ä¸åŒçš„æƒ…å†µè€Œæ”¹å˜ä»–ä»¬çš„sizeï¼Œæ¯”å¦‚é¡¶éƒ¨æˆ–è€…åº•éƒ¨çš„ bar é«˜åº¦å‘ç”Ÿæ”¹å˜æˆ–å®Œå…¨æ¶ˆå¤±æ—¶ï¼Œå› æ­¤ä½ çš„viewå°†ä¼šæ²¿ç€ main view çš„å¯è§åŒºåŸŸç§»åŠ¨<br>ä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹UIViewController çš„ <code>topLayoutGuide</code> å’Œ <code>bottomLayoutGuide</code> è¿™ä¸¤ä¸ªå±æ€§çš„ç”¨æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let arr = NSLayoutConstraint.constraintsWithVisualFormat(&quot;V:[tlg]-0-[v]&quot;, options: [], metrics: nil, views: [&quot;tlg&quot;:self.topLayoutGuide, &quot;v&quot;:v])</div></pre></td></tr></table></figure>
<p>åœ¨iOS9ä¸­ï¼ŒtopLayoutGuide æœ‰ä¸€ä¸ª bottomAnchorï¼ŒbottomLayoutGuide æœ‰ä¸€ä¸ª topAnchorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let tlg = self.topLayoutGuide</div><div class="line">let c = v.topAnchor.constraintEqualToAnchor(tlg.bottomAnchor)</div></pre></td></tr></table></figure>
<p>åœ¨iOS8ä¸­ï¼Œviewä¼šæœ‰é¡µè¾¹ç©ºç™½ï¼Œè¿™æ ·ä½ å¯ä»¥å°†çº¦æŸå»ºåœ¨viewçš„å†…æ¡†ä¸­ã€‚æœ€å¸¸è§çš„å¯èƒ½æ˜¯ä½ å°† subview æ”¾åœ¨ç¦» superview è¾¹æ¡†æœ€è¿‘çš„æ ‡å‡†è·ç¦»ã€‚å› æ­¤ UIView æœ‰ä¸€ä¸ªç±»å‹ä¸º UIEdgeInsets çš„å±æ€§ layoutMargins<br>è¿™ä¸ª struct åŒ…å«äº†å››ä¸ªæµ®ç‚¹å€¼ï¼Œè¿™ä¸ªå››ä¸ªå€¼ä¾æ¬¡ä»£è¡¨äº†åœ¨è¾¹æ¡†é€†æ—¶é’ˆæ–¹å‘çš„å€¼ â€”â€” ä¸Šï¼Œå·¦ï¼Œä¸‹ï¼Œå³ã€‚view controllerçš„ main viewçš„é»˜è®¤å€¼æ˜¯é¡¶éƒ¨å’Œåº•éƒ¨è¾¹è·ä¸º 0ï¼Œå·¦å³è¾¹è·ä¸º 16 å¯¹äºå…¶å®ƒçš„ viewï¼Œä¸Šä¸‹å·¦å³è¾¹è·éƒ½æ˜¯ 8 ä½ å¯ä»¥åœ¨viewåœ¨è¿™äº›è¾¹è·ä¸Šå»ºç«‹çº¦æŸã€‚ä¸€ä¸ªå¯è§†åŒ–æ ¼å¼ï¼ˆvisual formatï¼‰å­—ç¬¦ä¸²ç”¨ç®¡é“å­—ç¬¦â€™<strong>|</strong>â€˜æ¥å°† subview çš„è¾¹å›ºå®šåˆ°superview çš„è¾¹ä¸Šï¼ŒåŠ ä¸Šä¸€ä¸ªæ¨ªæ â€™-â€˜å¹¶ä¸”ä¸æ˜¾å¼æŒ‡å®šè·ç¦»ï¼Œè¿™æ ·å°±ä¼šå°†è¿™ä¸ªçº¦æŸæŒ‡å®šåˆ°superviewçš„<br>è¾¹è·ä¸Šã€‚ä¾‹å¦‚è¿™é‡Œæœ‰ä¸€ä¸ªviewä¸superviewçš„å·¦è¾¹è¾¹è·æŠµç¬¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let arr1 = NSLayoutConstraint.constraintsWithVisualFormat(&quot;H:|-[v]&quot;, options: [], metrics: nil, views: [&quot;v&quot;:v])</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ NSLayoutAttribute çš„å€¼ï¼š</p>
<ul>
<li>.TopMargin, .BottomMargin</li>
<li>.LeftMargin, .RightMargin, .LeadingMargin, .TrailingMargin</li>
<li>.CenterXWithinMargins, .CenterYWithinMargins</li>
</ul>
<p>è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•å®ç°ç›¸åŒçš„çº¦æŸï¼Œview å’Œ superview çš„å·¦è¾¹è¾¹è·å¯¹é½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let a = NSLayoutConstraint(item: v, attribute: .Leading, relatedBy: .Equal, toItem: self.view, attribute: .LeadingMargin, multiplier: 1, constant: 0)</div></pre></td></tr></table></figure>
<p>ç”¨iOS9æ–°ç‰¹æ€§ <code>layoutMarginGuide</code>å±æ€§æ¥å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let b = v.leadingAnchor.constraintEqualToAnchor(self.view.layoutMarginsGuide.leadingAnchor)</div></pre></td></tr></table></figure>
<p>è¿™ä¸€å°èŠ‚çš„å†…å®¹å¹³æ—¶æˆ‘ä»¬éƒ½ä¸æ€ä¹ˆç”¨åˆ°å¯èƒ½ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œé€šè¿‡æ€»ç»“ç¬”è®°å¾ˆé«˜å…´æˆ‘æŠŠè‡ªå·±è®²æ‡‚äº†ï¼Œä½ å‘¢ï¼Ÿæœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªå·±æ•²ä¸‹ä»£ç å¸®åŠ©ç†è§£ã€‚è®²é“ç†iOS9 ä¸­çœŸçš„æœ‰å¾ˆå¤šæ–°ç‰¹æ€§ï¼Œä¹Ÿçš„ç¡®ç»™æˆ‘ä»¬å·¥ç¨‹å¸ˆå¸¦æ¥äº†å¾ˆå¤šä¾¿åˆ©ã€‚</p>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2016/06/07/iOS9 Programming UIStackView/" data-toggle="tooltip" data-placement="top" title="iOS9 Programming UIStackView">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2016/05/26/iOS9 Programming Autoayout (I)/" data-toggle="tooltip" data-placement="top" title="iOS9 Programming Autoayout (I)">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                

                <!-- Friends Blog -->
                
            </div>

        </div>
    </div>
</article>









    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Jeavil&#39;s Blog 2016 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://yoursite.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="http://yoursite.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
